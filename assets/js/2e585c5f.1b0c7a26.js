"use strict";(self.webpackChunkreact_course_documentation=self.webpackChunkreact_course_documentation||[]).push([[565],{6977:function(e,a,n){n.r(a),n.d(a,{assets:function(){return c},contentTitle:function(){return d},default:function(){return N},frontMatter:function(){return p},metadata:function(){return m},toc:function(){return u}});var t=n(7462),o=n(3366),l=(n(7294),n(3905)),r=n(4996),i=n(2004),s=["components"],p={sidebar_position:1,slug:"/state"},d="Estado",m={unversionedId:"rendering/usestate",id:"rendering/usestate",title:"Estado",description:"El estado es el conjunto de valores que tiene la instancia de un componente mostrado en pantalla, es decir, contiene informaci\xf3n que puede cambiar durante la vida \xfatil del mismo.",source:"@site/docs/rendering/usestate.md",sourceDirName:"rendering",slug:"/state",permalink:"/react-course/state",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/state"},sidebar:"reactSidebar",previous:{title:"Renderizado",permalink:"/react-course/rendering"},next:{title:"Ciclo de vida",permalink:"/react-course/effect"}},c={},u=[{value:"Eventos",id:"eventos",level:2},{value:"useState",id:"usestate",level:2}],k={toc:u};function N(e){var a=e.components,n=(0,o.Z)(e,s);return(0,l.kt)("wrapper",(0,t.Z)({},k,n,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"estado"},"Estado"),(0,l.kt)("p",null,"El estado es el conjunto de valores que tiene la instancia de un componente mostrado en pantalla, es decir, contiene informaci\xf3n que puede cambiar durante la vida \xfatil del mismo. "),(0,l.kt)("p",null,"A diferencia de las ",(0,l.kt)("inlineCode",{parentName:"p"},"props")," que no pueden ser alteradas desde el componente que las recibe, los estados si pueden ser modificados, pero son inmutables directamente, para cambiar su valor es esencial hacerlo mediante una funci\xf3n especial, los cambios en los valores se aplican de manera as\xedncrona."),(0,l.kt)("p",null,"Para poder trabajar con estados locales del componente, ",(0,l.kt)("strong",{parentName:"p"},"React")," dispone del ",(0,l.kt)("strong",{parentName:"p"},"hook")," ",(0,l.kt)("inlineCode",{parentName:"p"},"useState"),"."),(0,l.kt)("p",null,"El ",(0,l.kt)("strong",{parentName:"p"},"hook")," ",(0,l.kt)("inlineCode",{parentName:"p"},"useState")," es una funci\xf3n que recibe por par\xe1metro el valor por defecto que va a tener el estado concreto en el momento de inicializarse, dicha funci\xf3n devuelve un array con dos elementos, el primero es el valor del estado, el segundo es una referencia a la funci\xf3n que se encargar\xe1 de alterar el valor del estado."),(0,l.kt)("br",null),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("em",{parentName:"p"},"Por convenci\xf3n el nombre de la funci\xf3n debe empezar con el prefijo ",(0,l.kt)("strong",{parentName:"em"},"set"),".")))),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("em",{parentName:"p"},"A los componentes sin estado se les llama ",(0,l.kt)("strong",{parentName:"em"},"Stateless Component"),", son funciones puras.")))),(0,l.kt)("h2",{id:"eventos"},"Eventos"),(0,l.kt)("p",null,"Generalmente para cambiar el estado de un componente se realiza mediante la acci\xf3n de un usuario. "),(0,l.kt)("p",null,"Estas acciones se producen mediante eventos, manejarlos es muy similar a trabajar con los eventos de elementos del DOM pero con ciertas diferencias."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Se nombran en formato ",(0,l.kt)("strong",{parentName:"li"},"camelCase"),"."),(0,l.kt)("li",{parentName:"ul"},"Son ",(0,l.kt)("strong",{parentName:"li"},"funciones")," en vez de ",(0,l.kt)("strong",{parentName:"li"},"strings"),"."),(0,l.kt)("li",{parentName:"ul"},"No pueden retornar ",(0,l.kt)("strong",{parentName:"li"},"false")," para evitar el comportamiento por defecto, hay que utilizar ",(0,l.kt)("inlineCode",{parentName:"li"},"event.preventDefault"),"."),(0,l.kt)("li",{parentName:"ul"},"No es necesario agregar observadores ",(0,l.kt)("inlineCode",{parentName:"li"},"addEventListener"),"."),(0,l.kt)("li",{parentName:"ul"},"Los eventos son instancias de la clase ",(0,l.kt)("inlineCode",{parentName:"li"},"SyntethicEvent"),", un contenedor agn\xf3stico al navegador alrededor del evento nativo y tiene la misma interfaz."),(0,l.kt)("li",{parentName:"ul"},"Es posible acceder al evento nativo a trav\xe9s del m\xe9todo ",(0,l.kt)("inlineCode",{parentName:"li"},"event.nativeEvent"),".",(0,l.kt)("br",null),(0,l.kt)("br",null))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Docs")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://es.reactjs.org/docs/handling-events.html"},"Manejando eventos - React")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://es.reactjs.org/docs/events.html"},"SyntheticEvent - React"))))),(0,l.kt)("h2",{id:"usestate"},"useState"),(0,l.kt)("p",null,"Al utilizar la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"useState")," esta retorna un array con dos valores ",(0,l.kt)("inlineCode",{parentName:"p"},"columns")," y ",(0,l.kt)("inlineCode",{parentName:"p"},"setColumns"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"useState")," recibe como par\xe1metro un ",(0,l.kt)("inlineCode",{parentName:"p"},"array")," con las distintas ",(0,l.kt)("strong",{parentName:"p"},"columnas"),". "),(0,l.kt)("p",null,"Ahora las ",(0,l.kt)("inlineCode",{parentName:"p"},"columns")," tiene m\xe1s propiedades, ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," para el nombre de la ",(0,l.kt)("strong",{parentName:"p"},"columna"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"alias")," para asociar la columna concreta con el valor de especificado en la ",(0,l.kt)("strong",{parentName:"p"},"fila"),", y una propiedad ",(0,l.kt)("inlineCode",{parentName:"p"},"isVisible")," que se va a encargar de mostrar u ocultar la columna."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.1-rendering/src/components/App.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"Para modificar el estado de las columnas, es decir, su visibilidad, el componente ",(0,l.kt)("inlineCode",{parentName:"p"},"TableColumnsSelector")," se va a encargar de esta responsabilidad. Va a recibir la propiedad ",(0,l.kt)("inlineCode",{parentName:"p"},"columns"),", la cual contiene todas las ",(0,l.kt)("strong",{parentName:"p"},"columnas"),", y la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"setColumns")," que es la encargada de modificar el estado."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.1-rendering/src/components/Table/TableColumnsSelector.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"El componente ",(0,l.kt)("inlineCode",{parentName:"p"},"TableColumnsSelector")," va a renderizar mediante un ",(0,l.kt)("inlineCode",{parentName:"p"},"map")," un listado de ",(0,l.kt)("inlineCode",{parentName:"p"},"checkboxs"),", cada uno de ellos hace referencia a una ",(0,l.kt)("strong",{parentName:"p"},"columna")," concreta. El ",(0,l.kt)("inlineCode",{parentName:"p"},"checkbox")," recibe el ",(0,l.kt)("inlineCode",{parentName:"p"},"alias")," en el atributo ",(0,l.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"isVisible")," en el atributo ",(0,l.kt)("inlineCode",{parentName:"p"},"checked")," y tiene asignado un evento ",(0,l.kt)("inlineCode",{parentName:"p"},"onChange")," observado por la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"onChangeHandler"),". "),(0,l.kt)("p",null,"La funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"onChangeHandle")," recibe por par\xe1metro el evento el cual contiene el elemento que lo ha disparado, a trav\xe9s de la propiedad del evento ",(0,l.kt)("inlineCode",{parentName:"p"},"target")," y a su vez la propiedad ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," se identifica la columna concreta."),(0,l.kt)("p",null,"Mediante la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"onChangeHandle")," se llama a la funci\xf3n recibida en la propiedad ",(0,l.kt)("inlineCode",{parentName:"p"},"setColumns"),". "),(0,l.kt)("p",null,"La funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"setColumns")," recibe una funci\xf3n de ",(0,l.kt)("inlineCode",{parentName:"p"},"callback")," con un par\xe1metro que contiene el estado actual justo antes de hacer el cambio."),(0,l.kt)("p",null,"Cuando se desea modificar el estado de un componente, hay que crear una referencia nueva hacia los datos. Esto no es un problema al trabajar con valores ",(0,l.kt)("strong",{parentName:"p"},"primitivos"),", pero al trabajar con ",(0,l.kt)("inlineCode",{parentName:"p"},"arrays")," u ",(0,l.kt)("inlineCode",{parentName:"p"},"objects")," siempre deben ser ",(0,l.kt)("strong",{parentName:"p"},"nuevas referencias"),", de lo contrario ",(0,l.kt)("strong",{parentName:"p"},"React")," no actualizar\xe1 el estado."),(0,l.kt)("p",null,"Se crea una copia del estado actual con la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"structuredClone")," que recibe como par\xe1metro el estado anterior. "),(0,l.kt)("p",null,"Sobre esta copia se busca la ",(0,l.kt)("strong",{parentName:"p"},"columna")," mediante la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"find")," utilizando el atributo ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," del ",(0,l.kt)("inlineCode",{parentName:"p"},"checkbox")," junto con el ",(0,l.kt)("inlineCode",{parentName:"p"},"alias")," asignado a cada columna, una vez encontrada, se cambia el valor de ",(0,l.kt)("inlineCode",{parentName:"p"},"isVisible"),", y se retorna el ",(0,l.kt)("inlineCode",{parentName:"p"},"array")," con la columna modificada."),(0,l.kt)("br",null),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("em",{parentName:"p"},"Este proceso se conoce como ",(0,l.kt)("strong",{parentName:"em"},"comunicaci\xf3n de hijos a padres"),".")))),(0,l.kt)("br",null),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"React")," va a reaccionar a este cambio y va a volver a renderizar el componente padre ",(0,l.kt)("inlineCode",{parentName:"p"},"App")," y por consiguiente a todos sus hijos manteniendo el estado modificado."),(0,l.kt)("br",null),(0,l.kt)("div",{align:"center"},(0,l.kt)(i.Z,{height:"100%",playing:!0,loop:!0,url:(0,r.Z)("/vids/react/dom.mp4"),mdxType:"ReactPlayer"})),(0,l.kt)("br",null),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Docs")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://alexsidorenko.com/blog/react-render-cheat-sheet/"},"A Visual Guide to React Rendering - Cheat Sheet"))))),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("em",{parentName:"p"},"Utilizar el valor del estado, devuelto por la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"em"},"useState"),", no garantiza que en el momento de realizar la modificaci\xf3n, dicho valor sea el correcto.")))),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("em",{parentName:"p"},"Es posible asignar un nuevo estado directamente al llamar a la funci\xf3n con el valor deseado.")))),(0,l.kt)("br",null),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'setColumns([ \n  {"name": "Id", "alias": "id", "isVisible": true},\n  {"name": "Nombre", "alias": "name", "isVisible": true} \n]);\n')),(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Un ",(0,l.kt)("strong",{parentName:"li"},"componente controlado")," es aquel que toma su valor actual a trav\xe9s de ",(0,l.kt)("inlineCode",{parentName:"li"},"props")," y notifica los cambios a trav\xe9s de ",(0,l.kt)("inlineCode",{parentName:"li"},"events")," como ",(0,l.kt)("inlineCode",{parentName:"li"},"onChange"),'. Un componente padre lo "controla" manejando su propio estado y pasando los nuevos valores mediante ',(0,l.kt)("inlineCode",{parentName:"li"},"props"),' al componente controlado. Tambi\xe9n se podr\xeda llamar a esto un "componente tonto".'),(0,l.kt)("li",{parentName:"ul"},"Un ",(0,l.kt)("strong",{parentName:"li"},"componente no controlado")," es uno que almacena su propio estado internamente, y se consulta el DOM usando una referencia para encontrar su valor actual cuando se necesita. como se har\xeda en HTML.",(0,l.kt)("br",null),(0,l.kt)("br",null))),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("em",{parentName:"p"},"Es posible tener multitud de ",(0,l.kt)("inlineCode",{parentName:"em"},"useState")," seg\xfan la necesidad del componente, aunque se recomienda agrupar los valores estrechamente relacionados.")))),(0,l.kt)("br",null),(0,l.kt)("p",null,"Ahora que es posible cambiar la visibilidad de las columnas, en el componente ",(0,l.kt)("inlineCode",{parentName:"p"},"TableColumns")," se deben de filtrar para que solo se rendericen aquellas columnas con la propiedad ",(0,l.kt)("inlineCode",{parentName:"p"},"isVisible")," con valor ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.1-rendering/src/components/Table/TableColumns.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"De la misma manera, solo deben renderizarse los valores de las columnas visibles."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.1-rendering/src/components/Table/TableRow.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"Llegados a este punto la aplicaci\xf3n se comportar\xe1 de la manera deseada, es posible mostrar u ocultar columnas, pero se ha introducido un problema, el componente ",(0,l.kt)("inlineCode",{parentName:"p"},"TableBody")," se ha acoplado a la ",(0,l.kt)("inlineCode",{parentName:"p"},"prop")," ",(0,l.kt)("inlineCode",{parentName:"p"},"columns")," para poder filtrar los campos de una ",(0,l.kt)("inlineCode",{parentName:"p"},"row"),", y el componente ",(0,l.kt)("inlineCode",{parentName:"p"},"TableColumns")," tiene la responsabilidad de filtrar las columnas."),(0,l.kt)("div",{style:{textAlign:"center"}},(0,l.kt)("table",{style:{display:"inline-block"}},(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("th",null,"Antes"),(0,l.kt)("th",null,"Despu\xe9s"))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("img",{src:"https://www.plantuml.com/plantuml/svg/Kr1GK4ZEIImkLd0iA52evbA00cs5vFoSqjoyOYIHelno2BSMJ4AqXIGcvQGgL6C8UQGcfc0HTeQOYjCc30rE-IcLAAfnko8elnnT9P92aF-qT7Nj86hXGd0HPoHNe4Y0N00MXNWLOGR8YrWbK7M0Gq8Bgpq87oBaWw2kHiWXIm40",alt:"Prop Drilling"})),(0,l.kt)("td",null,(0,l.kt)("img",{src:"https://www.plantuml.com/plantuml/svg/Iyv9B2vMS2meKAZcKW02RONa_9pItBnYAAyelxoOgvOh6Qmi934f9rMX6eNhaPgOWYRa3341mqGKHKxvAPLm5PYs1EMN8yi29K5krDBLjOF8Wxbm7jH6L46G3LX489v0c0Jo08OWGYNOVreODY7yW903kXb975aO0000",alt:"Prop Drilling"})))))),(0,l.kt)("p",null,"Para solventar el problema se deshacen los cambios aplicados en ",(0,l.kt)("inlineCode",{parentName:"p"},"TableColumns"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"TableBody")," y ",(0,l.kt)("inlineCode",{parentName:"p"},"TableRow")," de manera que vuelven a su estado original y la l\xf3gica del manejo de las columnas se va a extraer a un ",(0,l.kt)("strong",{parentName:"p"},"hook")," llamado ",(0,l.kt)("inlineCode",{parentName:"p"},"useColumns"),", y otro para las filas, ",(0,l.kt)("inlineCode",{parentName:"p"},"useRows"),". El objetivo de estos dos ",(0,l.kt)("strong",{parentName:"p"},"hooks")," es preparar los datos en el formato exacto que la tabla espera."),(0,l.kt)("p",null,"El componente ",(0,l.kt)("inlineCode",{parentName:"p"},"App")," va hacer uso de estos dos ",(0,l.kt)("strong",{parentName:"p"},"hooks"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"useColumns")," recibe un par\xe1metro con el listado de las columnas y va a retornar un ",(0,l.kt)("inlineCode",{parentName:"p"},"array"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"columns")," es son todas las columnas disponibles."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"setColumns")," es la funci\xf3n para cambiar el estado, esta vez el estado se encuentra dentro del ",(0,l.kt)("strong",{parentName:"li"},"hook"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"visibleColumns")," son las columnas visibles en el momento del renderizado."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"excludedColumns")," son las columnas que no se deben mostrar, este valor ser\xe1 utilizado por el ",(0,l.kt)("strong",{parentName:"li"},"hook")," ",(0,l.kt)("inlineCode",{parentName:"li"},"useRows")," para filtrar los valores de las columnas excluidas.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.2-rendering/src/components/App.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.2-rendering/src/hooks/useColumns.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.2-rendering/src/hooks/useRows.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.2-rendering/src/components/Table/TableRow.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"Tambi\xe9n es posible crear un estado sobre las filas, por ejemplo, para realizar un filtrado dado un texto de entrada, es decir, un buscador."),(0,l.kt)("p",null,"Para ello el ",(0,l.kt)("strong",{parentName:"p"},"hook")," ",(0,l.kt)("inlineCode",{parentName:"p"},"useRows")," retornar\xe1 las filas filtradas junto con la funci\xf3n para modificar el estado que se encuentra dentro del mismo. El componente ",(0,l.kt)("inlineCode",{parentName:"p"},"TableBody")," recibe por ",(0,l.kt)("inlineCode",{parentName:"p"},"props")," las filas filtradas."),(0,l.kt)("p",null,"Se a\xf1ade el componente ",(0,l.kt)("inlineCode",{parentName:"p"},"TableRowSearcher")," que se va a encargar de hacer el filtrado de las ",(0,l.kt)("inlineCode",{parentName:"p"},"rows")," recibe como propiedades la ",(0,l.kt)("inlineCode",{parentName:"p"},"rows")," sin filtrar y la funci\xf3n para modificar el estado contenido en el ",(0,l.kt)("strong",{parentName:"p"},"hook"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.3-rendering/src/components/App.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"Se aplica la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"filter")," a las ",(0,l.kt)("inlineCode",{parentName:"p"},"rows")," que recibe por ",(0,l.kt)("inlineCode",{parentName:"p"},"props")," el ",(0,l.kt)("strong",{parentName:"p"},"hook"),", mediante la cual filtra aquellas filas que cumplan con la condici\xf3n. El ",(0,l.kt)("strong",{parentName:"p"},"hook")," retorna un ",(0,l.kt)("inlineCode",{parentName:"p"},"array")," con las ",(0,l.kt)("inlineCode",{parentName:"p"},"rows")," filtradas y una funci\xf3n para alterar el estado interno del ",(0,l.kt)("strong",{parentName:"p"},"hook")," que se encarga de aplicar el filtro de b\xfasqueda."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.3-rendering/src/hooks/useRows.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"El componente ",(0,l.kt)("inlineCode",{parentName:"p"},"TableRowSearcher")," tiene su propio estado que se va a encargar del valor del ",(0,l.kt)("inlineCode",{parentName:"p"},"input")," de entrada, al enlazar el valor del ",(0,l.kt)("inlineCode",{parentName:"p"},"input")," con el estado se considera un ",(0,l.kt)("strong",{parentName:"p"},"componente controlado"),". "),(0,l.kt)("p",null,"La funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"onChangeHandler")," se va a encargar de modificar el estado asociado al ",(0,l.kt)("inlineCode",{parentName:"p"},"input")," mediante la funci\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"setSearch"),", en este caso, no es necesario obtener el estado anterior con lo cual se le asigna el nuevo valor directamente."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/hondilla/react-course/blob/edge/8.3-rendering/src/components/Table/TableRowSearcher.jsx\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"Al cambiar el estado en el componente ",(0,l.kt)("inlineCode",{parentName:"p"},"App"),", este se renderiza junto con todos sus hijos."),(0,l.kt)("br",null),(0,l.kt)("div",{align:"center"},(0,l.kt)(i.Z,{height:"100%",playing:!0,loop:!0,url:(0,r.Z)("/vids/react/state-new.mp4"),mdxType:"ReactPlayer"})),(0,l.kt)("br",null),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Docs")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://alexsidorenko.com/blog/react-render-always-rerenders/"},"A Visual Guide to React Rendering - It Always Re-renders")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://es.reactjs.org/docs/state-and-lifecycle.html"},"Estado y ciclo de vida - React"))))))}N.isMDXComponent=!0}}]);